!function(){"use strict";function e(e,t){var o=t.$get();e.preferredLanguage("pt_BR"),e.useSanitizeValueStrategy("escape"),e.useStaticFilesLoader({prefix:"app/_resources/locale-",suffix:".json?r="+(o.rev||"")})}e.$inject=["$translateProvider","$windowProvider"],angular.module("app",["ngStorage","ngMessages","pascalprecht.translate","ui.router","ui.bootstrap","ui.utils.masks","app.generic","app.customers","app.dashboard","app.orders","app.products","templates"]).config(e)}(),function(){"use strict";angular.module("templates",[])}(),function(){"use strict";angular.module("app.generic",[])}(),function(){"use strict";angular.module("app.dashboard",[])}(),function(){"use strict";angular.module("app.customers",[])}(),function(){"use strict";angular.module("app.orders",[])}(),function(){"use strict";angular.module("app.products",[])}(),angular.module("templates").run(["$templateCache",function(e){e.put("/_layout/header.html",'<header class="header"><h1>{{ state.current.data.title }}</h1></header><!-- .header -->'),e.put("/_layout/layout.html",'<aside class="sidebar-wrapper"><div class="sidebar" ng-include="\'/_layout/sidebar.html\'"></div></aside><!-- .sidebar --><main class="main"><div ng-include="\'/_layout/header.html\'"></div><section class="content"><blz-notification></blz-notification><p class="alert alert-success" ng-if="vm.alert"><strong>Success!</strong> Indicates a successful or positive action.</p></section><article class="content" ui-view id="view"></article></main><!-- .main -->'),e.put("/_layout/sidebar.html",'<a href="#/dashboard" ui-sref="app.dashboard" class="logo"><img src="/assets/images/logo-strudel-folhadinho.png" width="170px"></a><ul class="sidebar-nav"><li class="sidebar-item"><a href="#/customers" ui-sref="app.customers" ng-class="{\'is-active\': state.current.name.includes(\'app.customer\')}" class="sidebar-link"><i class="fa fa-users" aria-hidden="true"></i> Clientes</a></li><li class="sidebar-item"><a href="#/products" ui-sref="app.products" ng-class="{\'is-active\': state.current.name.includes(\'app.product\')}" class="sidebar-link"><i class="fa fa-shopping-bag" aria-hidden="true"></i> Produtos</a></li><li class="sidebar-item"><a href="#/orders" ui-sref="app.orders" ng-class="{\'is-active\': state.current.name.includes(\'app.order\')}" class="sidebar-link"><i class="fa fa-shopping-cart" aria-hidden="true"></i> Pedidos</a></li></ul><!-- .sidebar-nav -->'),e.put("/customers/fields.html",'<fieldset class="row"><div class="col-md-6 col-sm-6 form-group"><label>Nome *</label><input type="text" name="givenName" class="form-control" placeholder="Nome do Cliente" size="50" autocomplete="off" required ng-model="vm.customer.givenName" ng-minlength="3" maxlength="50"></div><div class="col-md-6 col-sm-6 form-group"><label>Sobrenome</label><input type="text" name="familyName" class="form-control" placeholder="Sobrenome do Cliente" size="50" autocomplete="off" ng-model="vm.customer.familyName" ng-minlength="3" maxlength="50"></div><div class="col-md-6 col-sm-6 form-group" ng-repeat="n in [1,2]"><label>Telefone {{ n }}</label><input type="tel" name="telephones[]" class="form-control" size="11" autocomplete="off" ui-br-phone-number ng-model="vm.customer.telephones[n - 1]" maxlength="15"></div><!--\n  <div class="col-md-6 col-sm-6 form-group">\n    <label>Apelido</label>\n    <input\n        type="text"\n        name="nickName"\n        class="form-control"\n        placeholder="Apelido do Cliente"\n        size="50"\n        autocomplete="off"\n        ng-model="vm.customer.nickName"\n        ng-minlength="3"\n        maxlength="50">\n  </div>\n  <div class="col-md-6 col-sm-6 form-group">\n    <label>Sexo</label>\n    <select\n        name="gender"\n        class="form-control"\n        ng-model="vm.customer.gender">\n        <option value="F">Feminino</option>\n        <option value="M">Masculino</option>\n    </select>\n  </div>\n--><div class="col-md-6 col-sm-6 form-group"><label>E-mail</label><input type="email" name="email" class="form-control" placeholder="Ex: cliente@tegustaempanadas.com.br" size="100" autocomplete="off" ng-model="vm.customer.email" ng-minlength="3" maxlength="100"></div><div class="col-md-6 col-sm-6 form-group"><label>Data de Nascimento</label><input type="text" class="form-control" maxlength="10" uib-datepicker-popup="dd/MM/yyyy" ng-model="vm.customer.birthDate" is-open="birthDate.opened" datepicker-options="vm.dateOptions" close-text="Fechar" show-button-bar="false" ng-focus="birthDate.opened = true"></div></fieldset><fieldset class="row"><legend class="col-md-12 col-sm-12">Endereço de entrega</legend><div class="col-md-6 col-sm-6 form-group"><label>CEP</label><input type="tel" name="address[postalCode]" class="form-control" size="9" autocomplete="off" ui-br-cep-mask ng-model="vm.customer.address.postalCode" ng-minlength="9" ng-keyup="vm.findByPostalCode(vm.customer.address.postalCode)" ng-blur="vm.findByPostalCode(vm.customer.address.postalCode)" maxlength="9"></div><div class="col-md-6 col-sm-6 form-group"><label>Rua</label><input type="text" name="address[streetAddress]" class="form-control" size="100" autocomplete="off" ng-model="vm.customer.address.streetAddress" ng-minlength="3" ng-disabled="vm.disableAddressFields" maxlength="100"></div><div class="col-md-6 col-sm-6 form-group"><label>Número</label><input type="tel" name="address[number]" class="form-control" size="100" autocomplete="off" ng-model="vm.customer.address.number" ng-minlength="3" ng-blur="vm.findReferencePoint(vm.customer.address.postalCode, vm.customer.address.number)" placeholder="Ex: 206" maxlength="100"></div><div class="col-md-6 col-sm-6 form-group"><label>Estado</label><select name="addressRegion" class="form-control" name="address[addressRegion]" ng-model="vm.customer.address.addressRegion" ng-disabled="vm.disableAddressFields" required><option value="AC">Acre</option><option value="AL">Alagoas</option><option value="AP">Amapá</option><option value="AM">Amazonas</option><option value="BA">Bahia</option><option value="CE">Ceará</option><option value="DF">Distrito Federal</option><option value="ES">Espirito Santo</option><option value="GO">Goiás</option><option value="MA">Maranhão</option><option value="MS">Mato Grosso do Sul</option><option value="MT">Mato Grosso</option><option value="MG">Minas Gerais</option><option value="PA">Pará</option><option value="PB">Paraíba</option><option value="PR">Paraná</option><option value="PE">Pernambuco</option><option value="PI">Piauí</option><option value="RJ">Rio de Janeiro</option><option value="RN">Rio Grande do Norte</option><option value="RS">Rio Grande do Sul</option><option value="RO">Rondônia</option><option value="RR">Roraima</option><option value="SC">Santa Catarina</option><option value="SP">São Paulo</option><option value="SE">Sergipe</option><option value="TO">Tocantins</option></select></div><div class="col-md-6 col-sm-6 form-group"><label>Cidade</label><input type="text" name="address[district]" class="form-control" size="100" autocomplete="off" ng-model="vm.customer.address.district" ng-minlength="3" ng-disabled="vm.disableAddressFields" value="São Paulo" maxlength="100"></div><div class="col-md-6 col-sm-6 form-group"><label>Bairro</label><input type="text" name="address[addressLocality]" class="form-control" size="100" autocomplete="off" ng-model="vm.customer.address.addressLocality" ng-minlength="3" ng-disabled="vm.disableAddressFields" maxlength="100"></div><div class="col-md-6 col-sm-6 form-group"><label>Complemento</label><input type="text" name="address[complement]" class="form-control" size="50" autocomplete="off" placeholder="Ex: ap 51 bloco A" ng-model="vm.customer.address.complement" maxlength="50"></div><div class="col-md-6 col-sm-6 form-group"><label>Referência</label><input type="text" name="address[referencePoint]" class="form-control" size="50" autocomplete="off" ng-model="vm.customer.address.referencePoint" maxlength="50"></div></fieldset>'),e.put("/customers/form.html",'<form name="vm.customerForm" ng-submit="vm.saveCustomer(vm.customer)"><div ng-include="\'/customers/fields.html\'" ng-if="vm.customer._id"></div><fieldset class="row" ng-if="vm.customer._id"><div class="col-md-12"><input type="submit" ng-disabled="vm.customerForm.$invalid" class="btn btn-primary" value="Salvar"></div></fieldset></form>'),e.put("/customers/list.html",'<form name="vm.searchCustomerForm" class="search-form" role="search" ng-submit="state.go(state.current.name, { q: vm.q })" novalidate><div class="input-group"><input type="text" id="search-input" placeholder="Telefone, email ou nome" autocomplete="off" name="search" ng-model="vm.q" class="form-control"> <span class="input-group-btn"><button class="btn btn-primary" type="submit" ng-disabled="vm.searchCustomerForm.$invalid"><i class="fa fa-search"></i></button></span></div></form><button class="btn btn-secondary" ng-click="state.go(\'app.customer\')">+ Novo</button><p ng-if="!vm.data.items.length">Nenhum cliente encontrado</p><table class="table" ng-if="vm.data.items.length"><thead><tr><td>Nome</td><td>Telefones</td><td>Email</td></tr></thead><tbody><tr class="pointer" ng-repeat="customer in vm.data.items" ng-click="state.go(\'app.customer\', { id: customer._id })"><td>{{ customer.givenName }}</td><td>{{ customer.telephones }}</td><td>{{ customer.email }}</td></tr></tbody></table><ul uib-pagination previous-text="&lsaquo;" next-text="&rsaquo;" last-text="&raquo;" force-ellipses="true" max-size="9" items-per-page="10" total-items="vm.data._metadata.total" ng-if="vm.data._metadata.total > vm.data._metadata.perPage" ng-model="vm.data._metadata.page" ng-change="state.go(state.current, { page: vm.data._metadata.page })"></ul>'),e.put("/dashboard/dashboard.html","dash"),e.put("/orders/fields.html",'<fieldset class="row" ng-if="!state.current.name.includes(\'app.customer\')"><legend class="col-md-12 col-sm-12">Cliente</legend><div class="col-md-12 col-sm-12"><input type="text" class="form-control" ng-model="vm.search" ng-keyup="vm.autocompleteCustomer(vm.search)"></div><div class="col-md-12 col-sm-12" ng-if="vm.order.customer.givenName">Cliente: {{ vm.order.customer.givenName }}</div></fieldset><fieldset class="row"><legend class="col-md-12 col-sm-12">Pedido</legend><div class="col-md-12 col-sm-12"><table class="table" border="0" cellspacing="0" cellpadding="0"><thead><tr><th>Produto</th><th width="100">Quantidade</th><th width="50">Valor unitário</th><th width="90">Total</th></tr></thead><tbody><tr ng-repeat="product in vm.order.items"><td><label for="item-{{ $index }}">{{ product.name }}</label></td><td><input type="tel" id="item-{{ $index }}" autocomplete="off" ng-model="product.quantity" maxlength="2" ui-number-mask="0" class="form-control"></td><td>{{ product.price | currency }}</td><td><span ng-if="product.quantity">{{ (product.total = (product.quantity || 0) * product.price) | currency }}</span></td></tr></tbody><tfoot><tr><td><b>Total:</b></td><td>{{ vm.order.items | sum:\'quantity\' }}</td><td></td><td>{{ (vm.order.payment.total = (vm.order.items | sum:\'total\') - vm.order.payment.discount) | currency }}</td></tr></tfoot></table></div></fieldset><fieldset class="row"><legend class="col-md-12 col-sm-12">Brinde</legend><div class="col-md-12 col-sm-12"><table class="table"><thead><tr><th>Produto</th><th width="100">Quantidade</th><th width="50">Valor unitário</th><th width="90">Total</th></tr></thead><tbody><tr ng-repeat="product in vm.order.gifts | filter:{ gift: true }"><td><label for="gift-{{ $index }}">{{ product.name }}</label></td><td><input type="tel" id="gift-{{ $index }}" autocomplete="off" ng-model="product.quantity" maxlength="2" ui-number-mask="0" class="form-control"></td><td>Brinde</td><td></td></tr></tbody><tfoot><tr><td><b>Total:</b></td><td>{{ vm.order.gifts | sum:\'quantity\' }}</td><td></td><td>Grátis</td></tr></tfoot></table></div></fieldset><fieldset class="row"><div class="col-md-3 col-sm-3 form-group"><label>Dia de entrega</label><input type="text" class="form-control" uib-datepicker-popup="dd/MM/yyyy" ng-model="vm.order.delivery.date" is-open="deliveryDate.opened" datepicker-options="vm.dateOptions" ng-required="true" close-text="Fechar" show-button-bar="false" ng-focus="deliveryDate.opened = true"></div><div class="col-md-3 col-sm-3 form-group"><div uib-timepicker class="timepicker" ng-model="vm.order.delivery.date" show-seconds="false" meridians="[\'AM\', \'PM\']"></div></div><div class="col-md-3 col-sm-3 form-group"><label>Taxa de entrega</label><input type="tel" class="form-control" size="50" autocomplete="off" ng-model="vm.order.delivery.price" ng-minlength="3" ui-money-mask value="5.0" max="100" maxlength="9"></div><div class="col-md-3 col-sm-3 form-group"><label>Entregador</label><select class="form-control" ng-model="vm.order.delivery.courier"><option value="Eduardo">Eduardo</option><option value="Kleber">Kleber</option><option value="Edson">Edson</option><option value="Carlos">Carlos</option><option value="William">William</option><option value="Juliana">Juliana</option></select></div></fieldset><fieldset class="row"><div class="col-md-3 col-sm-3"><label>Forma de Pagamento</label><select class="form-control" ng-model="vm.order.payment.paymentType"><option value="DEBIT_CARD">Débito</option><option value="CREDIT_CARD">Crédito</option><option value="SODEXO">Sodexo</option><option value="MONEY">Dinheiro</option><option value="TICKET">Ticket</option></select></div><div class="col-md-3 col-sm-3"><label>Desconto</label><input class="form-control" ui-money-mask ng-model="vm.order.payment.discount"></div><div class="col-md-3 col-sm-3" ng-if="vm.order.payment.paymentType == \'MONEY\'"><label>Pago em Dinheiro</label><input class="form-control" ui-money-mask ng-model="vm.order.payment.moneyTotal"></div><div class="col-md-3 col-sm-3" ng-if="vm.order.payment.paymentType == \'MONEY\'"><label>Troco:</label><p class="form-control">{{ (vm.order.payment.change = (vm.order.payment.moneyTotal - vm.order.payment.total + vm.order.payment.discount) | currency) }}</p></div><div class="col-md-3 col-sm-3"><label>Total:</label><p class="form-control">{{ vm.order.payment.total | currency }}</p></div></fieldset>'),e.put("/orders/form.html",'<form name="vm.orderForm" ng-submit="vm.saveOrder(vm.order, vm.customer)"><div ng-include="\'/orders/fields.html\'" ng-if="vm.order._id"></div><fieldset class="row" ng-if="vm.order._id"><div class="col-md-12"><input type="submit" ng-disabled="vm.orderForm.$invalid" class="btn btn-primary" value="Salvar"></div></fieldset></form>'),e.put("/orders/list.html",'<form name="vm.searchOrderForm" class="search-form" role="search" ng-submit="state.go(state.current.name, { q: vm.q })" novalidate><div class="input-group"><input type="text" id="search-input" placeholder="Nome do cliente" autocomplete="off" name="search" ng-model="vm.q" class="form-control"> <span class="input-group-btn"><button class="btn btn-primary" type="submit" ng-disabled="vm.searchOrderForm.$invalid"><i class="fa fa-search"></i></button></span></div></form><button class="btn btn-secondary" ng-click="state.go(\'app.order\')">+ Novo</button><p ng-if="!vm.data.items.length">Nenhum pedido encontrado</p><table class="table" ng-if="vm.data.items.length"><thead><tr><td>Nome</td><td>Total</td><td>Data</td></tr></thead><tbody><tr class="pointer" ng-repeat="order in vm.data.items" ng-click="state.go(\'app.order\', { id: order._id })"><td>{{ order.customer.givenName }}</td><td>{{ order.payment.total | currency }}</td><td>{{ order.createdAt | date }}</td></tr></tbody></table><ul uib-pagination previous-text="&lsaquo;" next-text="&rsaquo;" last-text="&raquo;" force-ellipses="true" max-size="9" items-per-page="10" total-items="vm.data._metadata.total" ng-if="vm.data._metadata.total > vm.data._metadata.perPage" ng-model="vm.data._metadata.page" ng-change="state.go(state.current, { page: vm.data._metadata.page })"></ul>'),e.put("/products/form.html",'<form name="vm.productForm" ng-submit="vm.save(vm.product)"><fieldset class="row" ng-if="vm.product._id"><div class="col-md-6 col-sm-6 form-group"><label>Nome *</label><input type="text" name="name" class="form-control" placeholder="Nome do Produto" size="50" autocomplete="off" required ng-model="vm.product.name" ng-minlength="3" maxlength="50"></div><div class="col-md-6 col-sm-6 form-group"><label>Preço *</label><input type="tel" name="price" class="form-control" placeholder="Preço do Produto" size="50" autocomplete="off" required ng-model="vm.product.price" ui-money-mask maxlength="50"></div><div class="col-md-6 col-sm-6 form-group"><label>Brinde</label><input type="checkbox" name="gift" class="form-control" ng-model="vm.product.gift"></div></fieldset><fieldset class="row" ng-if="vm.product._id"><div class="col-md-12"><input type="submit" ng-disabled="vm.productForm.$invalid" class="btn btn-primary" value="Salvar"></div></fieldset></form>'),e.put("/products/list.html",'<form name="vm.searchProductForm" class="search-form" role="search" ng-submit="state.go(state.current.name, { q: vm.q })" novalidate><div class="input-group"><input type="text" id="search-input" placeholder="Nome do produto" autocomplete="off" name="search" ng-model="vm.q" class="form-control"> <span class="input-group-btn"><button class="btn btn-primary" type="submit" ng-disabled="vm.searchProductForm.$invalid"><i class="fa fa-search"></i></button></span></div></form><button class="btn btn-secondary" ng-click="state.go(\'app.product\')">+ Novo</button><p ng-if="!vm.data.items.length">Nenhum produto encontrado</p><table class="table" ng-if="vm.data.items.length"><thead><tr><td>Nome</td><td>Preço</td></tr></thead><tbody><tr class="pointer" ng-repeat="product in vm.data.items" ng-click="state.go(\'app.product\', { id: product._id })"><td>{{ product.name }}</td><td>{{ product.price | currency }}</td></tr></tbody></table><ul uib-pagination previous-text="&lsaquo;" next-text="&rsaquo;" last-text="&raquo;" force-ellipses="true" max-size="9" items-per-page="10" total-items="vm.data._metadata.total" ng-if="vm.data._metadata.total > vm.data._metadata.perPage" ng-model="vm.data._metadata.page" ng-change="state.go(state.current, { page: vm.data._metadata.page })"></ul>')}]),function(){"use strict";function e(e,t){var o=this;return o}e.$inject=["$rootScope","$templateCache"],angular.module("app").controller("AppController",e)}(),function(){"use strict";function e(e,t,o,a){e.state=t;e.$on("$stateChangeStart",function(t,r,n){e.$storage=o,a.close()})}function t(e,t,o,a){t.interceptors.push("HTTPInterceptor"),o.otherwise("/dashboard"),location.port||a.debugInfoEnabled(!1),e.state("app",{data:{requireLogin:!0},abstract:!0,views:{"":{templateUrl:"/_layout/layout.html"}}}).state("app.dashboard",{url:"/dashboard",controller:"DashboardController",controllerAs:"vm",templateUrl:"/dashboard/dashboard.html",data:{title:"Dashboard"}})}e.$inject=["$rootScope","$state","$localStorage","NotificationService"],t.$inject=["$stateProvider","$httpProvider","$urlRouterProvider","$compileProvider"],angular.module("app").run(e).config(t)}(),function(){"use strict";function e(e,t,o,a){function r(e){o.list(e).then(function(e){t.data=e.data}).catch(a.error)}return t.q=e.params.q,r({q:t.q,page:e.params.page}),t}e.$inject=["$state","vm","service","NotificationService"],angular.module("app.generic").controller("GenericListController",e)}(),function(){"use strict";function e(){function e(e,t,o){var a,r=5e3,n={type:"success",message:null,timeout:!0,display:function(){return this.isVisible},close:function(){this.isVisible=!1},notify:function(e){this.message=e.message,this.title=e.title,this.type=e.type,this.timeout=e.timeout,this.init()},init:function(){o.cancel(a),this.isVisible=!0,a=this.timeout&&!isNaN(this.timeout)&&this.timeout>r?o(this.close.bind(this),this.timeout):o(this.close.bind(this),r)}};e.alert=n;t.$on("notificationChannel",function(e,t){return"close"===t?n.close():void n.notify(t)})}e.$inject=["$scope","$rootScope","$timeout"];var t=['<div class="alert-container" ng-if="alert.display()">','<div class="alert alert-{{ alert.type }}" role="alert">',"<i class=\"fa\" ng-class=\"{ 'fa-exclamation-circle': (alert.type === 'warning' || alert.type === 'danger'), 'fa-check-circle': alert.type === 'success' }\"></i>",'<p class="alert-text"><b ng-if="alert.title">{{ alert.title | translate }} </b>{{ alert.message | translate }}</p>','<i class="fa fa-close alert-close" ng-click="alert.close()"></i>',"</div>","</div>"];return{restrict:"EA",replace:!1,transclude:!0,scope:!0,template:t.join(""),controller:e}}angular.module("app").directive("blzNotification",e)}(),function(){"use strict";function e(){return function(e){if(e)return e.replace(/^\+55\s?/,"")}}function t(){return function(e,t){return(e||[]).reduce(function(e,o){return o[t]?e+o[t]:e},0)}}angular.module("app").filter("telephone",e).filter("sum",t)}(),function(){"use strict";function e(e,t,o,a){var r=this,n=a.defer();return r.request=function(e){return n=a.defer(),e.timeout=n.promise,e},r.response=function(e){return e},r.responseError=function(t){var o={401:"unauthorized",403:"forbidden",405:"unavailable",413:"entity_too_large",422:"unprocessable_entity",500:"unavailable",503:"unavailable",504:"unavailable"},r=String(t.status),s=o[r]?o[r]:"try_again";return/401|403|405|413|422|500|503|504/.test(r)?(n.resolve(o[r]),e.$broadcast(s,t),a.reject(s)):t},r}e.$inject=["$rootScope","$timeout","$translate","$q"],angular.module("app").factory("HTTPInterceptor",e)}(),function(){"use strict";function e(e,o){var a={get:function(o,a,r){var n={url:o,params:a||{},method:"GET"};return angular.extend(n,r),e(n).then(t)},post:function(o,a,r){var n={url:o,data:a,method:"POST",headers:r||{}};return e(n).then(t)},put:function(o,a,r){var n={url:o,data:a,method:"PUT",headers:r||{}};return e(n).then(t)},delete:function(o,a){var r={url:o,method:"DELETE",headers:a||{}};return e(r).then(t)},handleError:function(e){if(e.status>=400){var t=e.data,o=new Error(t.message||"Ocorreu um erro");throw o.status=status,o}return e}};return a}function t(e){return angular.isString(e.data)||(e.data=e.data||{}),e}e.$inject=["$http","$httpParamSerializer"],angular.module("app").factory("HTTPService",e)}(),function(){"use strict";function e(e){function t(t){return function(o){var a={type:t,message:angular.isObject(o)?o.message:o,title:!!angular.isObject(o)&&o.title,timeout:!angular.isObject(o)||o.timeout};e.$broadcast("notificationChannel",a)}}var o={success:t("success"),warning:t("warning"),error:t("danger"),info:t("info"),close:function(){e.$broadcast("notificationChannel","close")}};return o}e.$inject=["$rootScope"],angular.module("app").factory("NotificationService",e)}(),function(){"use strict";function e(e){var t={findReferencePoint:function(t,o){var a={postalCode:t,number:o};return e.get("/api/postalcodes/referencePoint",a,{cache:!0})},findByPostalCode:function(t){return e.get("/api/postalcodes/"+t,{},{cache:!0})}};return t}e.$inject=["HTTPService"],angular.module("app").factory("PostalCodeService",e)}(),function(){"use strict";function e(e){var t={endpoint:"",list:function(t){return e.get("/api/"+this.endpoint,t).then(e.handleError)},byId:function(t){return e.get("/api/"+this.endpoint+"/"+t).then(e.handleError)},save:function(t){var o;return o=t._id?e.put("/api/"+this.endpoint+"/"+t._id,t):e.post("/api/"+this.endpoint,t),o.then(e.handleError)},remove:function(t){return e.remove("/api/"+this.endpoint+"/"+t).then(e.handleError)}};return t}e.$inject=["HTTPService"],angular.module("app.generic").factory("RestService",e)}(),function(){"use strict";function e(e){var t=this;return console.log("vm"),t}e.$inject=["$rootScope"],angular.module("app").controller("DashboardController",e)}(),function(){"use strict";function e(e,t,o,a){function r(o){t.save(o).then(function(t){var o=t.data;201===t.status&&e.go(e.current.name,{id:o._id}),a.success({title:"customer",message:"form.saved"})}).catch(a.error)}function n(e,t){return!(!e||e.length<8||!t)&&void o.findReferencePoint(e,t).then(function(e){var t=e.data;l.customer.address=l.customer.address||{},l.customer.address.referencePoint=t.referencePoint})}function s(e){return!e||e.length<8?(l.disableAddressFields=!1,!1):void o.findByPostalCode(e).then(function(t){var o=t.data;l.customer.address=o,l.customer.address.postalCode=e,l.disableAddressFields=!!o.streetAddress}).catch(function(){l.disableAddressFields=!1})}function i(e){t.byId(e).then(function(e){l.customer=e.data,l.customer.birthDate=l.customer.birthDate?new Date(l.customer.birthDate):"",l.disableAddressFields=!(!l.customer.address||!l.customer.address.streetAddress)}).catch(a.error)}var l=this,d=e.params.id;return t.endpoint="customers",l.customer={address:{addressRegion:"SP"}},l.saveCustomer=r,l.findByPostalCode=s,l.findReferencePoint=n,l.dateOptions={formatYear:"yy",maxDate:new Date,minDate:new Date(1900,0,1),startingDay:1,showWeeks:!1},d&&i(d),l}e.$inject=["$state","RestService","PostalCodeService","NotificationService"],angular.module("app.customers").controller("CustomerController",e)}(),function(){"use strict";function e(e,t,o){var a=this;return o.endpoint="customers",angular.extend(a,t("GenericListController",{vm:a,$state:e,service:o})),a}e.$inject=["$state","$controller","RestService"],angular.module("app.customers").controller("CustomerListController",e)}(),function(){"use strict";function e(e){e.state("app.customers",{url:"/customers?q?page?",controller:"CustomerListController",controllerAs:"vm",templateUrl:"/customers/list.html",data:{title:"Lista de Clientes"}}).state("app.customer",{url:"/customer/:id?",controller:"CustomerController",controllerAs:"vm",templateUrl:"/customers/form.html",data:{title:"Cadastro de Cliente"}})}e.$inject=["$stateProvider"],angular.module("app.customers").config(e)}(),function(){"use strict";function e(e){var t={search:function(t){return e.get("/api/customers",t).then(e.handleError)}};return t}e.$inject=["HTTPService"],angular.module("app.customers").factory("CustomerService",e)}(),function(){"use strict";function e(e,t,o,a,r,n){function s(t){n.save(t).then(function(t){var o=t.data;201===t.status&&e.go(e.current.name,{id:o._id}),a.success({title:"order",message:"form.saved"})}).catch(a.error)}function i(e){r.search({q:e})}function l(e){t.byId(e).then(function(e){c.order=e.data,c.order.delivery&&c.order.delivery.date&&(c.order.delivery.date=new Date(c.order.delivery.date))}).catch(a.error)}function d(){return o.list({attr:"items"}).then(function(e){var t=e.data;c.order.items=t,c.order.gifts=angular.copy(t)}).catch(a.error)}var c=this,u=e.params.id;return t.endpoint="orders",c.order={},c.saveOrder=s,c.autocompleteCustomer=i,u?l(u):c.order.delivery=n.getDeliveryTime(),d(),c.dateOptions={formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1,showWeeks:!1},c}e.$inject=["$state","RestService","ProductService","NotificationService","CustomerService","OrderService"],angular.module("app.orders").controller("OrderController",e)}(),function(){"use strict";function e(e,t,o){var a=this;return o.endpoint="orders",angular.extend(a,t("GenericListController",{vm:a,$state:e,service:o})),a}e.$inject=["$state","$controller","RestService"],angular.module("app.orders").controller("OrderListController",e)}(),function(){"use strict";function e(e){e.state("app.orders",{url:"/orders?q?page?",controller:"OrderListController",controllerAs:"vm",templateUrl:"/orders/list.html",data:{title:"Lista de Pedidos"}}).state("app.order",{url:"/order/:id?",controller:"OrderController",controllerAs:"vm",templateUrl:"/orders/form.html",data:{title:"Cadastro de Pedido"}})}e.$inject=["$stateProvider"],angular.module("app.orders").config(e)}(),function(){"use strict";function e(e){function t(e){return(e||[]).filter(function(e){return e.quantity})}var o=3e6,a={getDeliveryTime:function(){var e=(new Date).getTime();return{date:new Date(e+o),price:5}},save:function(o,a){var r=angular.copy(o);a&&(r.customer=a,r.shippingAddress=a.address),r.items=t(r.items),r.gifts=t(r.gifts),r.payment&&"MONEY"!==r.payment.paymentType&&(r.payment.change=null,r.payment.moneyTotal=null);var n;return n=r._id?e.put("/api/orders/"+r._id,r):e.post("/api/orders",r),n.then(e.handleError)}};return a}e.$inject=["HTTPService"],angular.module("app.orders").factory("OrderService",e)}(),function(){"use strict";function e(e,t,o){function a(a){t.save(a).then(function(t){var a=t.data;201===t.status&&e.go(e.current.name,{id:a._id}),o.success({title:"product",message:"form.saved"})}).catch(o.error)}function r(e){t.byId(e).then(function(e){n.product=e.data}).catch(o.error)}var n=this,s=e.params.id;return t.endpoint="products",n.product={},n.save=a,s&&r(s),n}e.$inject=["$state","RestService","NotificationService"],angular.module("app.products").controller("ProductController",e)}(),function(){"use strict";function e(e,t,o){var a=this;return o.endpoint="products",angular.extend(a,t("GenericListController",{vm:a,$state:e,service:o})),a}e.$inject=["$state","$controller","RestService"],angular.module("app.products").controller("ProductListController",e)}(),function(){"use strict";function e(e){e.state("app.products",{url:"/products?q?page?",controller:"ProductListController",controllerAs:"vm",templateUrl:"/products/list.html",data:{title:"Lista de Produtos"}}).state("app.product",{url:"/product/:id?",controller:"ProductController",controllerAs:"vm",templateUrl:"/products/form.html",data:{title:"Cadastro de Produto"}})}e.$inject=["$stateProvider"],angular.module("app.products").config(e)}(),function(){"use strict";function e(e){var t={list:function(t){return e.get("/api/products",t).then(e.handleError)}};return t}e.$inject=["HTTPService"],angular.module("app.products").factory("ProductService",e)}();